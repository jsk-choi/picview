<Window x:Class="PicView.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PicView" 
        Height="800" Width="1200"
        MinHeight="400" MinWidth="600"
        WindowState="Maximized"
        Background="#1E1E1E"
        KeyDown="Window_KeyDown"
        Drop="Window_Drop"
        AllowDrop="True"
        DragOver="Window_DragOver">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Top toolbar -->
        <Border Grid.Row="0" Background="#2D2D2D" Padding="10,5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Left side - File info -->
                <TextBlock x:Name="FileNameText" 
                           Grid.Column="0"
                           Foreground="#CCCCCC" 
                           VerticalAlignment="Center"
                           FontSize="14"
                           TextTrimming="CharacterEllipsis"/>

                <!-- Center - Zoom controls -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Content="-" Style="{StaticResource ToolbarButton}" Click="ZoomOut_Click" ToolTip="Zoom Out (-)"/>
                    <TextBlock x:Name="ZoomText" 
                               Foreground="White" 
                               VerticalAlignment="Center" 
                               Margin="10,0"
                               FontSize="14"
                               MinWidth="60"
                               TextAlignment="Center"/>
                    <Button Content="+" Style="{StaticResource ToolbarButton}" Click="ZoomIn_Click" ToolTip="Zoom In (+)"/>
                    <Button Content="Fit" Style="{StaticResource ToolbarButton}" Click="FitToWindow_Click" Margin="10,0,0,0" ToolTip="Fit to Window (F)"/>
                    <Button Content="100%" Style="{StaticResource ToolbarButton}" Click="ActualSize_Click" ToolTip="Actual Size (1)"/>
                </StackPanel>

                <!-- Right side - Sort toggle and Image counter -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right">
                    <TextBlock x:Name="SortLabel" 
                               Text="Sort: Name (A-Z)" 
                               Foreground="#999999" 
                               VerticalAlignment="Center" 
                               FontSize="12"
                               Cursor="Hand"
                               ToolTip="Double-click to change sort order"
                               MouseLeftButtonDown="SortLabel_MouseLeftButtonDown"/>
                    <TextBlock x:Name="ImageCountText" 
                               Foreground="#CCCCCC" 
                               VerticalAlignment="Center"
                               Margin="20,0,0,0"
                               FontSize="14"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main image area -->
        <Grid Grid.Row="1" x:Name="ImageContainer" ClipToBounds="True">
            <Canvas x:Name="ImageCanvas" 
                    Width="{Binding ActualWidth, ElementName=ImageContainer}"
                    Height="{Binding ActualHeight, ElementName=ImageContainer}"
                    ClipToBounds="True"
                    MouseWheel="MainImage_MouseWheel">
                <Canvas.Background>
                    <DrawingBrush TileMode="Tile" Viewport="0,0,20,20" ViewportUnits="Absolute">
                        <DrawingBrush.Drawing>
                            <DrawingGroup>
                                <GeometryDrawing Brush="#252525">
                                    <GeometryDrawing.Geometry>
                                        <RectangleGeometry Rect="0,0,20,20"/>
                                    </GeometryDrawing.Geometry>
                                </GeometryDrawing>
                                <GeometryDrawing Brush="#2A2A2A">
                                    <GeometryDrawing.Geometry>
                                        <GeometryGroup>
                                            <RectangleGeometry Rect="0,0,10,10"/>
                                            <RectangleGeometry Rect="10,10,10,10"/>
                                        </GeometryGroup>
                                    </GeometryDrawing.Geometry>
                                </GeometryDrawing>
                            </DrawingGroup>
                        </DrawingBrush.Drawing>
                    </DrawingBrush>
                </Canvas.Background>

                <Image x:Name="MainImage"
                       MouseWheel="MainImage_MouseWheel"
                       MouseLeftButtonDown="MainImage_MouseLeftButtonDown"
                       MouseLeftButtonUp="MainImage_MouseLeftButtonUp"
                       MouseMove="MainImage_MouseMove"
                       Stretch="Uniform"
                       RenderOptions.BitmapScalingMode="HighQuality"/>
            </Canvas>

            <!-- Navigation buttons -->
            <Button Content="&#9664;" 
                    Style="{StaticResource NavButton}" 
                    HorizontalAlignment="Left" 
                    VerticalAlignment="Center"
                    Margin="20,0"
                    Click="Previous_Click"
                    ToolTip="Previous"/>

            <Button Content="&#9654;" 
                    Style="{StaticResource NavButton}" 
                    HorizontalAlignment="Right" 
                    VerticalAlignment="Center"
                    Margin="20,0"
                    Click="Next_Click"
                    ToolTip="Next"/>

            <!-- Drop hint when no image loaded -->
            <TextBlock x:Name="DropHint"
                       Text="Drop an image here or press O to open"
                       Foreground="#666666"
                       FontSize="20"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"/>
        </Grid>

        <!-- Bottom status bar -->
        <Border Grid.Row="2" Background="#2D2D2D" Padding="10,5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock x:Name="ImageInfoText" 
                           Grid.Column="0"
                           Foreground="#999999" 
                           FontSize="12"/>

                <TextBlock Grid.Column="1"
                           Foreground="#666666" 
                           FontSize="12"
                           Text="Scroll: Zoom | Drag: Pan | Arrows: Navigate | F: Fit | 1: 100% | O: Open | F2: Rename | Del: Delete"/>
            </Grid>
        </Border>
    </Grid>
</Window>
